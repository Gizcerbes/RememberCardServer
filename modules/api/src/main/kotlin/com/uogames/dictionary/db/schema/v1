CREATE TABLE IF NOT EXISTS users (global_owner VARCHAR(100) PRIMARY KEY, "name" VARCHAR(100) NOT NULL)
CREATE TABLE IF NOT EXISTS images (global_id uuid PRIMARY KEY, global_owner VARCHAR(100) NOT NULL, image_uri TEXT NOT NULL, CONSTRAINT fk_images_global_owner__global_owner FOREIGN KEY (global_owner) REFERENCES users(global_owner) ON DELETE CASCADE ON UPDATE RESTRICT)
CREATE TABLE IF NOT EXISTS pronunciations (global_id uuid PRIMARY KEY, global_owner VARCHAR(100) NOT NULL, audio_uri TEXT NOT NULL, CONSTRAINT fk_pronunciations_global_owner__global_owner FOREIGN KEY (global_owner) REFERENCES users(global_owner) ON DELETE CASCADE ON UPDATE RESTRICT)
CREATE TABLE IF NOT EXISTS phrases (global_id uuid PRIMARY KEY, global_owner VARCHAR(100) NOT NULL, phrase TEXT NOT NULL, definition TEXT NULL, lang TEXT NOT NULL, pronounce_id uuid NULL, image_id uuid NULL, time_change BIGINT NOT NULL, "like" BIGINT NOT NULL, dislike BIGINT NOT NULL, CONSTRAINT fk_phrases_global_owner__global_owner FOREIGN KEY (global_owner) REFERENCES users(global_owner) ON DELETE CASCADE ON UPDATE RESTRICT, CONSTRAINT fk_phrases_pronounce_id__global_id FOREIGN KEY (pronounce_id) REFERENCES pronunciations(global_id) ON DELETE SET NULL ON UPDATE RESTRICT, CONSTRAINT fk_phrases_image_id__global_id FOREIGN KEY (image_id) REFERENCES images(global_id) ON DELETE SET NULL ON UPDATE RESTRICT)
CREATE TABLE IF NOT EXISTS cards (global_id uuid PRIMARY KEY, global_owner VARCHAR(100) NOT NULL, phrase_id uuid NOT NULL, translate_id uuid NOT NULL, image_id uuid NULL, reason TEXT NOT NULL, time_chane BIGINT NOT NULL, "like" BIGINT NOT NULL, dislike BIGINT NOT NULL, CONSTRAINT fk_cards_global_owner__global_owner FOREIGN KEY (global_owner) REFERENCES users(global_owner) ON DELETE CASCADE ON UPDATE RESTRICT, CONSTRAINT fk_cards_phrase_id__global_id FOREIGN KEY (phrase_id) REFERENCES phrases(global_id) ON DELETE CASCADE ON UPDATE RESTRICT, CONSTRAINT fk_cards_translate_id__global_id FOREIGN KEY (translate_id) REFERENCES phrases(global_id) ON DELETE CASCADE ON UPDATE RESTRICT, CONSTRAINT fk_cards_image_id__global_id FOREIGN KEY (image_id) REFERENCES images(global_id) ON DELETE SET NULL ON UPDATE RESTRICT)
CREATE TABLE IF NOT EXISTS modules (global_id uuid PRIMARY KEY, global_owner VARCHAR(100) NOT NULL, "name" TEXT NOT NULL, time_change BIGINT NOT NULL, "like" BIGINT NOT NULL, dislike BIGINT NOT NULL, CONSTRAINT fk_modules_global_owner__global_owner FOREIGN KEY (global_owner) REFERENCES users(global_owner) ON DELETE CASCADE ON UPDATE RESTRICT)
CREATE TABLE IF NOT EXISTS module_cards (global_id uuid PRIMARY KEY, global_owner VARCHAR(100) NOT NULL, module_id uuid NOT NULL, card_id uuid NOT NULL, CONSTRAINT fk_module_cards_global_owner__global_owner FOREIGN KEY (global_owner) REFERENCES users(global_owner) ON DELETE CASCADE ON UPDATE RESTRICT, CONSTRAINT fk_module_cards_module_id__global_id FOREIGN KEY (module_id) REFERENCES modules(global_id) ON DELETE CASCADE ON UPDATE RESTRICT, CONSTRAINT fk_module_cards_card_id__global_id FOREIGN KEY (card_id) REFERENCES cards(global_id) ON DELETE CASCADE ON UPDATE RESTRICT)